아키텍쳐 설계 방법을 정리하자.
- 프로그래밍 정석
- 실용주의 소프트웨어
- Clean Code

### 글의 목적
코드를 작성할 때는 명확한 역할 분담과 역할 분담에 따른 코드의 위치를 명확히 해야한다.
함수가 다수의 컴포넌트가 사용한다고 해서 항상 Common이나 Util에 정의해서는 안된다.
그리고 브라우저에서 제공하는 Storage라고 해서 각 파일에 sessionStorage 같은 인터페이스를 파편화해서 정의해서는 안된다.

Common이나 Util 그리고 파편화 시키면 우리가 요구사항을 수정할 때
정확히 예측을 하기 힘들뿐더러 중복된 코드를 생산하게 된다.
사고의 중복과 코드의 중복을 줄이기 위해서는 리펙토링을 자주해야 한다.
코드의 위치를 어디에 정의해야 하는 지, 불편한 인터페이스를 어떻게하면 효율적으로 사용할 수 있는 지 가이드가 필요해 정리한 자료이다.

### 코드의 범위
코드의 역할에 따라 코드가 영향력을 행사할 수 있는 범위가 있다.
한 컴포넌트에서 함수라면 해당 컴포넌트에만 영향력을 행사할 수 있고,
다수 컴포넌트에서 필요한 함수라면 다수 컴포넌트에서 영향력 행사 할 수 있다.

#### 다수의 컴포넌트 또는 모듈에서 사용되는 코드
다수의 컴포넌트 또는 모듈에서 사용되는 코드를 본적이 있을 것이다.
이럴 때 중복되는 코드를 어디에 정의해야되는 지 고민됬을 것이다.
내가 생각하는 기준은 중복된 코드를 사용하는 컴포넌트 또는 모듈의
같은 부모를 찾을 때 해당 위치로 이동 시킨다.

결국 코드는 부모-자식 관계 또는 자식-자식 관계를 형성하고 있다.
이럴 때는 공통된 조상을 찾아 그 위치에 정의하는 것이 좋다.
코드가 영향을 줄 수 있는 범위를 최소화할 수 있다.
범위를 최소화하는 이유는 해당 코드의 사용위치를 명확히 할 수 있기 때문이다.

Common 또는 Util에 정의하면 사실 쉽게 가능하지 않을까 생각하기도 하고
나중에 사용할 필요성이 있지 않을 까 생각하기도 할 것이다.
하지만 **YAGNI** 가이드라인이 있다. 이 의미는 **You Aren't Going to Need it**이라는 의미로 **확성성을 고려해서 넣은 설계라도 예상은 대부분 빗나간다**라는 것이다.

우리가 범용적으로 Common 또는 Util에 정의하는 시간이 쓸모없어지는 시간이 되는 것이다.

#### Common 또는 Util은 언제 사용해야 할까
정말 모든 코드에서 사용할 수 있는 코드를 작성할 때이다. 이 경우는 흔치 않을 수 있다.
내 기준은 가장 크게 나눈 피쳐 모듈에서 피처 모듈에서 필요할 때
Common 또는 Util에 정의한다. 그리고 이때는 추상화 레벨을 최대한 높게 잡아야 한다.

#### 추상화를 끌어 올리다
추상화를 최대한 끌어올리는 것은 특정한 범위에서 사용하는 용도가 아닌
모든 코드에서 사용되어 영향력을 행사할 수 있는 것이다.

### 불편한 인터페이스 개선
#### 이상적이지 않은 브라우저 인터페이스
```js
const BROWSER_STORAGE = sessionStorage
const setItem = (key, value) => {
  BROWSER_STORAGE.setItem(key, JSON.stringify(value))
}
const getItem = (key) => {
  return JSON.parse(BROWSER_STORAGE.getItem(key))
}

setItem('isCanlender', true)
setItem('dateIds', [1, 2, 3])

console.log(getItem('isCanlender'))
console.log(getItem('dateIds'))
```

### 공통 코드 개발
공통 코드를 개발하는 경우는 중복된 영역에 사용되는 경우이다.

#### 컴포넌트
공통 컴포넌트를 개발해야 되는 경우는 현업에 있어서 항상 존재한다.
왜냐하면 디자인은 매번 다른 버튼과 입력폼을 사용하지 않는 다.
동일한 디자인과 사용방법을 구현해야 사용자는 통일성을 느낀다.
그렇기 때문에 컴포넌트를 설계하는 경우가 생긴다.

여기서 중요한 것은 컴포넌트가 사용이 필요한 요구사항을 분석하는 것이다.
다수 페이지에서 사용되는 컴포넌트인데, 특정 페이지에서 사용되는
기능만 맞춰서 구현하게되면 다시 수정하는 작업과 리펙토링하는 비용을 줄일 수 있다.

두 영역에 작성하게 되면 두 영역에 작성하는 시간과
재작성하는 시간 비용이 발생하지만 정상적으로 스펙에 대한 분석을 명확히 할 경우
해당 컴포넌트를 개발하는 시간과 사용하는 시간이 하는 것이다.

#### 함수
함수를 공통 코드로 개발하는 경우는 정말 전역적인 함수가 필요할 때이다.
함수를 정의할 때는 최대한 쪼개서 사양한 추상화 레벨에서 사용할 수 있도록 해야 한다.